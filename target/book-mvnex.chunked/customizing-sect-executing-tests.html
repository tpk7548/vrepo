<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head xmlns="http://www.w3.org/1999/xhtml">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>4.12. Executing Unit Tests</title>
    <link rel="stylesheet" type="text/css" href="docbook-xsl.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.78.1" />
    <link rel="home" href="index.html" title="Maven by Example" />
    <link rel="up" href="customizing.html" title="Chapter 4. Customizing a Maven Project" />
    <link rel="prev" href="customizing-sect-custom-test-resource.html" title="4.11. Adding Unit Test Resources" />
    <link rel="next" href="customizing-sect-custom-packaged.html" title="4.13. Building a Packaged Command Line Application" />
  </head>
  <body>
    <div id="nav-sub-block">
      <a class="hide" name="nav-sub-a" id="nav-sub-a"></a>
      <ul id="nav-sub">
        <li class="first">
          <a accesskey="p" href="customizing-sect-custom-test-resource.html">
            <span>Prev : 4.11. Adding Unit Test Resources</span>
          </a>
        </li>
        <li>
          <a accesskey="h" href="index.html">
            <span>TOC</span>
          </a>
        </li>
        <li class="last">
          <a accesskey="n" href="customizing-sect-custom-packaged.html">
            <span>Next : 4.13. Building a Packaged Command Line Application</span>
          </a>
        </li>
      </ul>
    </div>
    <div xmlns="http://www.w3.org/1999/xhtml" class="section">
      <div class="titlepage">
        <div>
          <div>
            <h2 xmlns="" class="title" style="clear: both"><a xmlns="http://www.w3.org/1999/xhtml" id="customizing-sect-executing-tests"></a>4.12. Executing Unit Tests</h2>
          </div>
        </div>
      </div>
      <p>Now that your project has unit tests, let’s run them. You don’t have
to do anything special to run a unit test; the <code class="literal">test</code> phase is a
normal part of the Maven lifecycle. You run Maven tests whenever you
run <code class="literal">mvn package</code> or <code class="literal">mvn install</code>. If you would like to run all the
lifecycle phases up to and including the <code class="literal">test</code> phase, run <code class="literal">mvn test</code>:</p>
      <pre class="screen">$ mvn test
...
[INFO] [surefire:test]
[INFO] Surefire report directory:
~/examples/ch-custom/simple-weather/target/surefire-reports

-------------------------------------------------------
T E S T S
-------------------------------------------------------
Running org.sonatype.mavenbook.weather.yahoo.WeatherFormatterTest
0    INFO  YahooParser  - Creating XML Reader
177  INFO  YahooParser  - Parsing XML Response
239  INFO  WeatherFormatter  - Formatting Weather Data
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.547 sec
Running org.sonatype.mavenbook.weather.yahoo.YahooParserTest
475  INFO  YahooParser  - Creating XML Reader
483  INFO  YahooParser  - Parsing XML Response
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.018 sec

Results :

Tests run: 2, Failures: 0, Errors: 0, Skipped: 0</pre>
      <p>Executing <code class="literal">mvn test</code> from the command line caused Maven to execute all
lifecycle phases up to the <code class="literal">test</code> phase. The Maven Surefire plugin has
a <code class="literal">test</code> goal which is bound to the <code class="literal">test</code> phase. This <code class="literal">test</code> goal
executes all of the unit tests this project can find under
<code class="literal">src/test/java</code> with filenames matching <code class="literal">**/Test*.java</code>,
<code class="literal">**/*Test.java</code> and <code class="literal">**/*TestCase.java</code>. In the case of this project,
you can see that the Surefire plugin’s <code class="literal">test</code> goal executed
<code class="literal">WeatherFormatterTest</code> and <code class="literal">YahooParserTest</code>. When the Maven Surefire
plugin runs the JUnit tests, it also generates XML and text reports in
the <code class="literal">${basedir}/target/surefire-reports</code> directory. If your
tests are failing, you should look in this directory for details like
stack traces and error messages generated by your unit tests.</p>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h3 xmlns="" class="title"><a xmlns="http://www.w3.org/1999/xhtml" id="customizing-sect-ignoring-failures"></a>4.12.1. Ignoring Test Failures</h3>
            </div>
          </div>
        </div>
        <p>You will often find yourself developing on a system that has failing
unit tests. If you are practicing Test-Driven Development (TDD), you
might use test failure as a measure of how close your project is to
completeness. If you have failing unit tests, and you would still like
to produce build output, you are going to have to tell Maven to ignore
build failures. When Maven encounters a build failure, its default
behavior is to stop the current build. To continue building a project
even when the Surefire plugin encounters failed test cases, you’ll
need to set the <code class="literal">testFailureIgnore</code> configuration property of the
Surefire plugin to <code class="literal">true</code>.</p>
        <p><strong>Ignoring Unit Test Failures. </strong>
</p>
        <pre class="screen">&lt;project&gt;
    [...]
    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;
                &lt;configuration&gt;
                    &lt;testFailureIgnore&gt;true&lt;/testFailureIgnore&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
    [...]
&lt;/project&gt;</pre>
        <p>
</p>
        <p>The plugin documents
(<a class="ulink" href="http://maven.apache.org/plugins/maven-surefire-plugin/test-mojo.html" target="_top">http://maven.apache.org/plugins/maven-surefire-plugin/test-mojo.html</a>)
show that this parameter declares an expression:</p>
        <p><strong>Plugin Parameter Expressions. </strong>
</p>
        <pre class="screen">testFailureIgnore  Set this to true to ignore a failure during
                   testing. Its use is NOT RECOMMENDED, but quite
                   convenient on occasion.

* Type: boolean
* Required: No
* User Property: maven.test.failure.ignore</pre>
        <p>
</p>
        <p>This property can be set from the command line using the <code class="literal">-D</code>
parameter:</p>
        <pre class="screen">$ mvn test -Dmaven.test.failure.ignore=true</pre>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h3 xmlns="" class="title"><a xmlns="http://www.w3.org/1999/xhtml" id="customizing-sect-skipping-tests"></a>4.12.2. Skipping Unit Tests</h3>
            </div>
          </div>
        </div>
        <p>You may want to configure Maven to skip unit tests altogether. Maybe
you have a very large system where the unit tests take minutes to
complete and you don’t want to wait for unit tests to complete before
producing output. You might be working with a legacy system that has a
series of failing unit tests, and instead of fixing the unit tests,
you might just want to produce a JAR. Maven provides for the ability
to skip unit tests using the <code class="literal">skip</code> parameter of the Surefire
plugin. To skip tests from the command line, simply add the
<code class="literal">maven.test.skip</code> property to any goal:</p>
        <pre class="screen">$ mvn install -Dmaven.test.skip=true
...
[INFO] [compiler:testCompile]
[INFO] Not compiling test sources
[INFO] [surefire:test]
[INFO] Tests are skipped.
...</pre>
        <p>When the Surefire plugin reaches the <code class="literal">test</code> goal, it will skip the
unit tests if the <code class="literal">maven.test.skip</code> properties is set to
<code class="literal">true</code>. Another way to configure Maven to skip unit tests is to add
this configuration to your project’s <code class="literal">pom.xml</code>. To do this, you would
add a <code class="literal">plugin</code> element to your build configuration.</p>
        <p><strong>Skipping Unit Tests. </strong>
</p>
        <pre class="screen">&lt;project&gt;
    [...]
    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;
                &lt;configuration&gt;
                    &lt;skip&gt;true&lt;/skip&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
    [...]
&lt;/project&gt;</pre>
        <p>
</p>
      </div>
    </div>
    <div id="nav-sub-block">
      <a class="hide" name="nav-sub-a" id="nav-sub-a"></a>
      <ul id="nav-sub">
        <li class="first">
          <a accesskey="p" href="customizing-sect-custom-test-resource.html">
            <span>Prev : 4.11. Adding Unit Test Resources</span>
          </a>
        </li>
        <li>
          <a accesskey="h" href="index.html">
            <span>TOC</span>
          </a>
        </li>
        <li class="last">
          <a accesskey="n" href="customizing-sect-custom-packaged.html">
            <span>Next : 4.13. Building a Packaged Command Line Application</span>
          </a>
        </li>
      </ul>
    </div>
  </body>
</html>
